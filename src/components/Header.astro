---
import ThemeToggle from "../components/ThemeToggle.astro";

const navItems = [
  { href: "/", label: "Home" },
  { href: "/about", label: "About" },
  { href: "/lab", label: "Lab" },
  { href: "/posts", label: "Posts" },
  { href: "/projects", label: "Projects" },
  { href: "/guestbook", label: "Guestbook" },
];

const currentPath = Astro.url.pathname;
---

<header class="site-header">
  <ThemeToggle />
  <nav aria-label="Primary navigation">
    <ul class="nav-links">
      {navItems.map(({ href, label }) => {
        const isActive = href === "/" 
          ? currentPath === "/" 
          : currentPath.startsWith(href);
        
        return (
          <li>
            <a 
              href={href} 
              aria-current={isActive ? "page" : undefined}
            >
              {label}
            </a>
          </li>
        );
      })}
    </ul>
  </nav>
</header>

<style>
  .site-header {
    position: fixed;
    top: 0;
    left: 0;
    padding: var(--space-2xl);
    z-index: 100;
  }

  .nav-links {
    display: flex;
    flex-direction: column;
    gap: var(--space-3xs);
    list-style: none;
    padding: var(--space-m) 0 0;
    margin: 0;
    font-family: EditorialNew, serif;
  }

  .nav-links a {
    display: block;
    text-decoration: none;
    color: var(--gray-12);
    transition: 
      color 0.2s ease,
      text-decoration-color 0.2s ease;
  }

  .nav-links a:hover {
    text-decoration: underline;
    text-decoration-color: var(--gray-12);
    text-underline-offset: 0.25em;
  }

  .nav-links a[aria-current="page"] {
    color: var(--gray-12);
    text-decoration: underline;
    text-decoration-color: var(--tomato-9);
    text-underline-offset: 0.25em;
  }

  @media (max-width: 768px) {
    .site-header {
      position: static;
      padding: var(--space-m);
    }
  }
</style>
---
import ThemeToggle from "../components/ThemeToggle.astro";

const navItems = [
  { href: "/", label: "Home" },
  { href: "/about", label: "About" },
  { href: "/lab", label: "Lab" },
  { href: "/posts", label: "Posts" },
  { href: "/projects", label: "Projects" },
  { href: "/guestbook", label: "Guestbook" },
];

const currentPath = Astro.url.pathname;
const isGuestbook =
  currentPath === "/guestbook" || currentPath.startsWith("/guestbook/");
---

<header class={`site-header ${isGuestbook ? "site-header--static" : ""}`}>
  <ThemeToggle />
  <nav aria-label="Primary navigation">
    <ul class="nav-links">
      {
        navItems.map(({ href, label }) => {
          const isActive =
            href === "/" ? currentPath === "/" : currentPath.startsWith(href);

          return (
            <li>
              <a href={href} aria-current={isActive ? "page" : undefined}>
                {label}
              </a>
            </li>
          );
        })
      }
    </ul>
  </nav>
</header>

<style>
  .site-header {
    position: fixed;
    top: 0;
    left: 0;
    padding: var(--space-2xl);
    z-index: 100;
  }

  .nav-links {
    display: flex;
    flex-direction: column;
    gap: var(--space-3xs);
    list-style: none;
    padding: var(--space-m) 0 0;
    margin: 0;
    font-family: EditorialNew, serif;
  }

  .nav-links a {
    display: block;
    text-decoration: none;
    color: var(--gray-12);
    transition:
      color var(--duration-fast, 150ms) ease,
      text-decoration-color var(--duration-fast, 150ms) ease;
  }

  .nav-links a:hover {
    text-decoration: underline;
    text-decoration-color: var(--gray-12);
    text-underline-offset: 0.25em;
  }

  .nav-links a[aria-current="page"] {
    color: var(--gray-12);
    text-decoration: underline;
    text-decoration-color: var(--tomato-9);
    text-underline-offset: 0.25em;
  }

  @media (max-width: 1200px) {
    .site-header {
      position: static;
      padding: var(--space-m);
      max-inline-size: clamp(min(100%, 20rem), 90vw, 48rem);
      inline-size: 100%;
      margin-inline: auto;
      padding-inline: var(--space-xs);
    }

    @media (max-width: 640px) {
      .site-header {
        padding-inline: 0;
      }
    }

    .nav-links {
      padding: var(--space-s) 0 0;
    }
  }

  .site-header--static {
    position: static;
  }

  @media (min-width: 1201px) {
    .site-header--static {
      position: absolute;
    }
  }
</style>

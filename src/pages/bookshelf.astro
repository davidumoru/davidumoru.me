---
import { getCollection } from "astro:content";
import BaseLayout from "../layouts/BaseLayout.astro";
import PageHeader from "../components/PageHeader.astro";
import BookCard from "../components/Book.astro";

const bookEntries = await getCollection("books");
const allBooks = bookEntries.map((entry) => entry.data);
---

<BaseLayout
  title="Bookshelf"
  description="A curated list of books that have shaped my thinking, sparked my curiosity, or provided a much-needed escape."
>
  <main>
    <div class="container">
      <PageHeader
        title="Bookshelf"
        description="Books I've read and books I like the idea of having read."
      />
    </div>
    <div class="page-wrapper">
      <div class="bookshelf-grid">
        {allBooks.map((book) => <BookCard book={book} />)}
      </div>
    </div>
  </main>

</BaseLayout>

<style>
  .page-wrapper {
    max-width: 80rem;
    margin-left: auto;
    margin-right: auto;
    padding: 0 1.5rem 3rem 1.5rem;
  }

  .bookshelf-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 1.25rem 2rem;
  }

  @media (min-width: 640px) {
    .bookshelf-grid {
      grid-template-columns: repeat(auto-fit, 220px);
      justify-content: center;
      gap: 1rem 4rem;
    }
  }
</style>
